<!DOCTYPE html>
<html lang="en">
  <head>
    <title>WinkKit  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a title="WinkKit  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">WinkKit Docs</a> (77% documented)</p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">WinkKit Reference</a>
        <img id="carat" src="img/carat.png" />
        WinkKit  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/VoidPresenter.html">VoidPresenter</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/VoidView.html">VoidView</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/WKButton.html">WKButton</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/WKCollectionView.html">WKCollectionView</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/WKCollectionViewCell.html">WKCollectionViewCell</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/WKCollectionViewController.html">WKCollectionViewController</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/WKCollectionViewDataSource.html">WKCollectionViewDataSource</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/WKCollectionViewInfiniteDataSourceDelegate.html">WKCollectionViewInfiniteDataSourceDelegate</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/WKImageView.html">WKImageView</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/WKLabel.html">WKLabel</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/WKLog.html">WKLog</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/WKNavigationController.html">WKNavigationController</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/WKNavigator.html">WKNavigator</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/WKNetworkObservableViewControllerPresenter.html">WKNetworkObservableViewControllerPresenter</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/WKNetworkReachabilityHelper.html">WKNetworkReachabilityHelper</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/WKService.html">WKService</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/WKService/RequestChain.html">‚Äì RequestChain</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/WKSpinnerView.html">WKSpinnerView</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/WKTableView.html">WKTableView</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/WKTableViewCell.html">WKTableViewCell</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/WKTableViewController.html">WKTableViewController</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/WKTableViewDataSource.html">WKTableViewDataSource</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/WKTableViewInfiniteDataSourceDelegate.html">WKTableViewInfiniteDataSourceDelegate</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/WKTextField.html">WKTextField</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/WKTextView.html">WKTextView</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/WKView.html">WKView</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/WKViewController.html">WKViewController</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/UIColorInputError.html">UIColorInputError</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Extensions/Collection.html">Collection</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/String.html">String</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/UICollectionView.html">UICollectionView</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/UIColor.html">UIColor</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/UITableView.html">UITableView</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/UIView.html">UIView</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/UIWindow.html">UIWindow</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/NetworkObservableView.html">NetworkObservableView</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/WKBaseViewController.html">WKBaseViewController</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/WKGenericViewControllerPresenter.html">WKGenericViewControllerPresenter</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/WKInstantiableViewController.html">WKInstantiableViewController</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/WKLoadableSpinnerView.html">WKLoadableSpinnerView</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/WKNetworkObserver.html">WKNetworkObserver</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols.html#/s:7WinkKit17WKPresentableViewP">WKPresentableView</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/WKPresenter.html">WKPresenter</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/WKPropertiesInspectable.html">WKPropertiesInspectable</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Structs.html">Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/WKCustomLayerStyleKey.html">WKCustomLayerStyleKey</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Typealiases.html">Type Aliases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:7WinkKit16WKLoadableUIViewa">WKLoadableUIView</a>
              </li>
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:7WinkKit22WKPullToRefreshClosurea">WKPullToRefreshClosure</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <p align="center">
<img src="readme-res/winkkit_logo.png" width="25%">
</p>
<h1 id='winkkit' class='heading'>WinkKit</h1>

<p><a href="http://cocoapods.org/pods/WinkKit"><img src="https://img.shields.io/cocoapods/v/WinkKit.svg?style=flat" alt="CocoaPods Version"></a>
<a href="http://cocoapods.org/pods/WinkKit"><img src="https://img.shields.io/cocoapods/l/WinkKit.svg?style=flat" alt="License"></a>
<a href="http://cocoapods.org/pods/WinkKit"><img src="https://img.shields.io/badge/platform-iOS-blue.svg" alt="Platforms"></a>
<a href="https://developer.apple.com/swift"><img src="https://img.shields.io/badge/swift-4.0-orange.svg?style=flat" alt="Swift Version"></a></p>

<p>An iOS framework that contains a set of classes that follow MVP pattern and solve some common problem written in Swift, used for Wink&rsquo;s application. Follow this guide to know how to structure a Wink iOS project.</p>
<h2 id='table-of-contents' class='heading'>Table of Contents</h2>

<ol>
<li><a href="#Getting_Started">Getting Started</a></li>
<li><a href="#Understanding_Structure">Understanding Structure</a></li>
<li><a href="#UI_Extension">Using enhanced Views</a></li>
<li><a href="#Using_ViewControllers">Using ViewControllers and Presenters</a></li>
<li><a href="#Using_TabColViews">Using Table Views and Collection Views</a></li>
<li><a href="#Utils_And_More">Utils and more</a></li>
</ol>
<h2 id='getting-started-a-name-getting_started' class='heading'>Getting Started <a name="Getting_Started" /></h2>
<h3 id='prerequisites' class='heading'>Prerequisites</h3>

<p>You need <a href="https://developer.apple.com/xcode/">Xcode 9</a>, Swift 4 and <a href="https://guides.cocoapods.org/using/getting-started.html">CocoaPods</a> installed.</p>
<h3 id='add-project-file-templates-to-xcode-optional-but-recommended' class='heading'>Add project/file templates to Xcode (Optional but recommended)</h3>

<p>WinkKit has been designed to help creating app with MVP pattern (you&rsquo;ll understand better later); to follow this pattern, it&rsquo;s needed to create for each view several files.
WinkKit contains a set of Xcode templates to make project and file creation faster; download the <a href="https://github.com/WINKgroup/Wink-Kit-Helper/blob/master/Release/Wink%20Project%20Helper.app.zip" download target="_blank" download>Wink Project Helper</a> macOS app to install all templates.</p>

<p>After template install, in Xcode, under <strong>File &gt; New &gt; File</strong> (or CMD+N) you can create view controllers, table view cells and collection view cells that conform to MVP like following.</p>

<p align="center">
<img src="readme-res/template_files.png" width="50%">
</p>

<p>You can even create a whole project, see next point.</p>
<h2 id='installing' class='heading'>Installing</h2>
<h3 id='create-project-with-template' class='heading'>Create project with template</h3>

<p>If you&rsquo;re starting from scratch, and you successfully installed the Wink Kit templates, you can create new project directly from Xcode, under <strong>File &gt; New &gt; Project</strong></p>

<p align="center">
<img src="readme-res/template_project.png" width="50%">
</p>

<p>This template creates for you the basic structure of a Wink app (that will be explained later), the <code>Podfile</code> already configured with <code>WinkKit</code> framework, a <code>.gitignore</code> and other boilerplate files/code.</p>

<p>Now run <code>pod install</code> in the root project folder, and re-open the project from the workspace file. That&rsquo;s all. üéâ</p>
<h3 id='manual' class='heading'>Manual</h3>

<p>Just paste the CocoaPods dependency in your <code>Podfile</code>. Due to a cocoapods bug, ensure to paste the <strong>post_install</strong> function too.</p>
<pre class="highlight ruby"><code><span class="c1"># Podfile</span>
<span class="n">use_frameworks!</span>

<span class="n">target</span> <span class="s1">'YOUR_TARGET_NAME'</span> <span class="k">do</span>

    <span class="c1"># https://github.com/WINKgroup/WinkKit</span>
    <span class="n">pod</span> <span class="s1">'WinkKit'</span>

<span class="k">end</span>

<span class="c1"># This post install is needed because of a Cocoapods bug; it is needed to render WinkKit properties in InterfaceBuilder correctly.</span>
<span class="n">post_install</span> <span class="k">do</span> <span class="o">|</span><span class="n">installer</span><span class="o">|</span>
    <span class="n">installer</span><span class="p">.</span><span class="nf">pods_project</span><span class="p">.</span><span class="nf">targets</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">target</span><span class="o">|</span>
        <span class="n">target</span><span class="p">.</span><span class="nf">build_configurations</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
            <span class="k">if</span> <span class="n">target</span><span class="p">.</span><span class="nf">name</span> <span class="o">===</span> <span class="s1">'AlamofireImage'</span>
                <span class="n">config</span><span class="p">.</span><span class="nf">build_settings</span><span class="p">[</span><span class="s1">'SWIFT_VERSION'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'3.3'</span> <span class="c1"># set swift 3.3 on AlamofireImage</span>
            <span class="k">end</span>
            <span class="n">config</span><span class="p">.</span><span class="nf">build_settings</span><span class="p">[</span><span class="s1">'CONFIGURATION_BUILD_DIR'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'$PODS_CONFIGURATION_BUILD_DIR'</span>
        <span class="k">end</span>
    <span class="k">end</span>
<span class="k">end</span>

</code></pre>

<p><strong>N.B.</strong>: AlamofireImage compiles only with Swift 3.3.</p>
<h2 id='api-documentation' class='heading'>API Documentation</h2>
<h3 id='check-the-classes-reference-a-href-docs-index-html-here-a' class='heading'>Check the classes reference <a href="./docs/index.html">here</a>.</h3>
<h2 id='understanding-structure-a-name-understanding_structure-a' class='heading'>Understanding Structure <a name="Understanding_Structure"></a></h2>

<p>Before talking about classes of framework we&rsquo;ll take a look on architecture structure. </p>

<p>It is a MVP pattern; look at this <a href="https://medium.com/ios-os-x-development/ios-architecture-patterns-ecba4c38de52">iOS Architectures overview</a> to understand differences between MVC, MVP, MVVM, VIPER.</p>

<p>A Wink iOS project <strong>should</strong> be structured in the following way, expecially if the project will grow a lot:</p>

<p><img src="./readme-res/arch_diagram.jpg" alt="Arch diagram"></p>

<p><br></p>
<h3 id='presentation' class='heading'>Presentation</h3>

<p>It&rsquo;s the layer that contains all iOS Framework dedicated classes, like <code>UIKit</code> framework. We could say that this layer cannot exists without an iPhone/iPad because <code>UIKit</code> can run only there.</p>

<p><img src="readme-res/presentation_layer.png" width=50% /></p>

<ul>
<li><strong>AppDelegate</strong>: It&rsquo;s the well known AppDelegate class, nothing special;</li>
<li><strong>Use Cases</strong>: A group that contains all use cases. It&rsquo;s important to understand that a <em>Use Case</em> is what user do in one or more app screen, for example the Login.

<ul>
<li><strong>Login</strong>: En example of a Use Case. It will contain all related ViewControllers, Presenter (if a use case contains more than one), DataSources etc.

<ul>
<li><strong>LoginPresenter</strong>: A simple presenter; LoginPresenter keep the state of LoginViewController; a presenter is the class that contains logic, the ViewController does <strong>not</strong> contain logic. <strong>Presenter doesn&rsquo;t contains UIKit classes!</strong>, this is needed to keep presenters easy testable.</li>
<li><strong>LoginViewController</strong>: In classic MVC pattern, (Massive View Controller in iOS world üò´) all logic was here, mixed with the view handling; in this framework a ViewController <strong>owns</strong> a presenter and delegates it for the logic. The view controller doesn&rsquo;t have a method <code>func performLogin(email: String, password: String)</code> for example; instead, the presenter does. The view controller will only receive user input and tell the presenter that something happened. The presenter will do work and tell the view controller that the view should change.</li>
</ul></li>
</ul></li>
<li><strong>Core</strong>: A group that contains base classes re-usable all around project. It&rsquo;s a good practice to define this classes to avoid code duplication that could increase the maintanance difficulty.</li>
<li><strong>Resources</strong>: All resources go here, included .xcassets, custom fonts&hellip;</li>
</ul>

<p><br></p>
<h3 id='data' class='heading'>Data</h3>

<p>It&rsquo;s the layer that handles all data stuff, such as http calls, cache uploading/downloading to/from a backend. No <code>UIKit</code> classes in this layer!</p>

<p><img src="readme-res/data_layer.png" width=50% /></p>

<ul>
<li><strong>Cache</strong>: A group that contains classes like SessionManager and all other stuff that saves data locally.</li>
<li><strong>Networking</strong>: The group that contains the Http Client, which must be implemented with <strong>Alamofire</strong>. WinkKit provides <a href="https://github.com/Alamofire/Alamofire">Alamofire</a> and <a href="https://github.com/Alamofire/AlamofireImage">Alamofire Image</a> in the framework itself, so you don&rsquo;t need to add anything in the Podfile.

<ul>
<li><strong>ResponseSerialization</strong>: Contains the <code>DataResponse</code> extension of Alamofire: it provides a common response for http calls that return an object instead of a json; json parsing is done in this extension (see source file for detail). Notice that this extension uses <a href="https://github.com/thoughtbot/Argo">Argo</a> for json parsing.</li>
<li><strong>Resource</strong>: an enum that maps the response of https calls.</li>
<li><strong>Error</strong>: the class/struct that maps http errors (both client and server)</li>
<li><strong>Routers</strong>: Routers are responsible to know api&rsquo;s endpoints and to create a <code>urlRequest</code> that are used by <strong>Services</strong> to perform http calls.</li>
<li><strong>Services</strong>: Services perform http calls, using the request created by routers.</li>
</ul></li>
</ul>

<p><br></p>
<h1 id='presentation' class='heading'>Presentation</h1>
<h2 id='using-enhanced-views-a-name-ui_extension-a' class='heading'>Using enhanced Views <a name="UI_Extension"></a></h2>

<p>WinkKit provides common view classes that have more <code>@IBDesignable</code> in InterfaceBuilder.</p>

<ul>
<li>WKView</li>
<li>WKImageView</li>
<li>WKButton</li>
<li>WKLabel</li>
<li>WKTextView</li>
</ul>

<p>Every class extends the <code>UIKit</code> one; for example <code><a href="Classes/WKView.html">WKView</a></code> extends <code>UIView</code>. To use these classes in InterfaceBuilder, drag the object from the Object library and make it extends the desired WinkKit view.
For example to use a <code><a href="Classes/WKButton.html">WKButton</a></code>, drag a Button from Object library, then go to Identity Inspector and set the custom class:</p>

<p><img src="readme-res/button_identity_inspector.png" width="40%"></p>

<p><strong>Make sure to leave WinkKit as module</strong></p>

<p>Then you can customize the button from Attributes inspector:</p>

<p><img src="readme-res/button_attributes_inspector.png" width="40%"></p>
<h2 id='using-viewcontrollers-and-presenters-a-name-using_viewcontrollers-a' class='heading'>Using ViewControllers and Presenters <a name="Using_ViewControllers"></a></h2>

<p>In a WinkKit app every view controller should extends the <code><a href="Classes/WKViewController.html">WKViewController&lt;P&gt;</a></code> (or <code><a href="Classes/WKTableViewController.html">WKTableViewController&lt;P&gt;</a></code> or <code>WKCollectionViewContrller&lt;P&gt;</code>, they have all same behaviours).</p>

<p>A <code><a href="Classes/WKViewController.html">WKViewController</a></code> wants a subclass of <code><a href="Protocols/WKGenericViewControllerPresenter.html">WKGenericViewControllerPresenter</a></code> (which is a protocol that extends the base presenter protocol <code><a href="Protocols/WKPresenter.html">WKPresenter</a></code>) because the view controller life-cycle is bound to this kind of presenter. A typical implementation of home page is</p>
<pre class="highlight swift"><code><span class="c1">// HomeViewController.swift</span>

<span class="kd">class</span> <span class="kt">HomeViewController</span><span class="p">:</span> <span class="kt">WKViewController</span><span class="o">&lt;</span><span class="kt">HomePresenter</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="c1">// do only UI stuff here</span>
<span class="p">}</span>

<span class="c1">// Since the view controller is handled by HomePresenter, it must be conform to LoginView.</span>
<span class="kd">extension</span> <span class="kt">HomeViewController</span><span class="p">:</span> <span class="kt">LoginView</span> <span class="p">{</span>
    <span class="c1">// implements all HomeView methods/properties</span>
<span class="p">}</span>


<span class="c1">// HomePresenter.swift</span>

<span class="c1">// Define what the view can do</span>
<span class="kd">protocol</span> <span class="kt">LoginView</span><span class="p">:</span> <span class="kt">PresentableView</span> <span class="p">{</span>

<span class="p">}</span>

<span class="kd">class</span> <span class="kt">HomePresenter</span><span class="p">:</span> <span class="kt">WKGenericViewControllerPresenter</span> <span class="p">{</span>

    <span class="kd">typealias</span> <span class="kt">View</span> <span class="o">=</span> <span class="kt">LoginView</span> <span class="c1">// need to tell the protocol which is the view handled</span>

    <span class="k">weak</span> <span class="k">var</span> <span class="nv">view</span><span class="p">:</span> <span class="kt">LoginView</span><span class="p">?</span> <span class="c1">// keep view weak to avoid retain-cycle since view controller holds a reference to this presenter</span>

    <span class="kd">required</span> <span class="nf">init</span><span class="p">()</span> <span class="p">{}</span> <span class="c1">// framework wants empty init</span>

    <span class="c1">// do all logic here, such as use a Service to fetch data and tell the view to update</span>
<span class="p">}</span>

</code></pre>

<p><strong>Notice that you don&rsquo;t need to call any method to bind the view controller and the presenter, everything is automatically done by the framework!</strong> üéâüéâüéâ</p>

<p>HomePresenter and HomeViewController are two different files. You can use the file template to create quickly this structure üòâ.</p>
<h2 id='using-table-views-and-collection-views-a-name-using_tabcolviews-a' class='heading'>Using Table Views and Collection Views <a name="Using_TabColViews"></a></h2>

<p>WinkKit provides both <code><a href="Classes/WKTableView.html">WKTableView</a></code>, <code><a href="Classes/WKCollectionView.html">WKCollectionView</a></code> and <code><a href="Classes/WKTableViewCell.html">WKTableViewCell</a></code>, <code><a href="Classes/WKCollectionViewCell.html">WKCollectionViewCell</a></code>.
Let&rsquo;s talk about <code><a href="Classes/WKTableView.html">WKTableView</a></code> and <code><a href="Classes/WKTableViewCell.html">WKTableViewCell</a></code> (collection view has same logic).</p>

<p><strong>N.B.</strong>: To have a better structure, all cell must have a xib: do <strong>not</strong> create cell in the storyboard directly.</p>

<p>The <code><a href="Classes/WKTableView.html">WKTableView</a></code> provides two methods to register and dequeue a <code><a href="Classes/WKTableViewCell.html">WKTableViewCell</a></code> quickly by doing:</p>
<pre class="highlight swift"><code><span class="n">tableView</span><span class="o">.</span><span class="nf">register</span><span class="p">(</span><span class="nv">cell</span><span class="p">:</span> <span class="kt">ItemTableViewCell</span><span class="o">.</span><span class="k">self</span><span class="p">)</span> <span class="c1">// register the cell with a xib that has same name of the class</span>

<span class="n">tableView</span><span class="o">.</span><span class="nf">dequeueReusableCell</span><span class="p">(</span><span class="nv">ofType</span><span class="p">:</span> <span class="kt">ItemTableViewCell</span><span class="o">.</span><span class="k">self</span><span class="p">,</span> <span class="nv">for</span><span class="p">:</span> <span class="n">indexPath</span><span class="p">)</span> <span class="c1">// dequeue a cell, already casted</span>

</code></pre>

<p>Cell acts like view controller: they have a presenter (in this case the plain <code><a href="Protocols/WKPresenter.html">WKPresenter</a></code>) and they must conform to the view that the presenter handles. For this reason creating a cell is like creating a view controller:</p>
<pre class="highlight swift"><code><span class="c1">// ItemTableViewCell.swift</span>

<span class="kd">class</span> <span class="kt">ItemTableViewCell</span><span class="p">:</span> <span class="kt">WKTableViewCell</span><span class="o">&lt;</span><span class="kt">ItemPresenter</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="c1">// do only UI stuff here</span>
<span class="p">}</span>

<span class="kd">extension</span> <span class="kt">ItemTableViewCell</span><span class="p">:</span> <span class="kt">ItemView</span> <span class="p">{</span>
    <span class="c1">// implements all ItemView methods/properties  </span>
<span class="p">}</span>

<span class="c1">// ItemPresenter.swift</span>

<span class="c1">/// The protocol that the cell handled by presenter must conforms to.</span>
<span class="kd">protocol</span> <span class="kt">ItemView</span><span class="p">:</span> <span class="kt">PresentableView</span> <span class="p">{</span>

<span class="p">}</span>

<span class="c1">/// The presenter that will handle all logic of the view.</span>
<span class="kd">class</span> <span class="kt">ItemPresenter</span><span class="p">:</span> <span class="kt">WKPresenter</span> <span class="p">{</span>

    <span class="kd">typealias</span> <span class="kt">View</span> <span class="o">=</span> <span class="kt">ItemView</span>

    <span class="c1">// The view associated to this presenter. Keep weak to avoid retain-cycle</span>
    <span class="k">weak</span> <span class="k">var</span> <span class="nv">view</span><span class="p">:</span> <span class="kt">ItemView</span><span class="p">?</span>

    <span class="c1">// the item that will be showed in this cell</span>
    <span class="kd">private</span> <span class="k">var</span> <span class="nv">item</span><span class="p">:</span> <span class="kt">Item</span><span class="o">!</span>

    <span class="nf">init</span><span class="p">(</span><span class="n">with</span> <span class="nv">item</span><span class="p">:</span> <span class="kt">Item</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">item</span> <span class="o">=</span> <span class="n">item</span>
    <span class="p">}</span>

    <span class="c1">// do all logic here</span>
<span class="p">}</span>

</code></pre>

<p>You can use template to quickly create all of those class/protocols üòÅ.</p>

<p>Unlike view controllers, a cell must be configured after dequeued in the data source by doing something like:</p>
<pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">tableView</span><span class="p">(</span><span class="n">_</span> <span class="nv">tableView</span><span class="p">:</span> <span class="kt">UITableView</span><span class="p">,</span> <span class="n">cellForRowAt</span> <span class="nv">indexPath</span><span class="p">:</span> <span class="kt">IndexPath</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">UITableViewCell</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">cell</span> <span class="o">=</span> <span class="n">tableView</span><span class="o">.</span><span class="nf">dequeueReusableCell</span><span class="p">(</span><span class="nv">ofType</span><span class="p">:</span> <span class="kt">ItemTableViewCell</span><span class="o">.</span><span class="k">self</span><span class="p">,</span> <span class="nv">for</span><span class="p">:</span> <span class="n">indexPath</span><span class="p">)</span>
    <span class="k">let</span> <span class="nv">presenter</span> <span class="o">=</span> <span class="kt">ItemPresenter</span><span class="p">()</span> <span class="c1">// create a presenter</span>
    <span class="n">cell</span><span class="o">.</span><span class="nf">configure</span><span class="p">(</span><span class="nv">with</span><span class="p">:</span> <span class="n">presenter</span><span class="p">)</span> <span class="c1">// configure the cell with the presenter</span>
    <span class="k">return</span> <span class="n">cell</span>
<span class="p">}</span>

</code></pre>
<h3 id='collection-view-and-table-view-data-source' class='heading'>Collection View and Table View data source</h3>

<p>As a best practice, it&rsquo;s better to decouple data sources from view controller. Avoid making a view controller as a data source to have all stuff better separated and re-usable. To communicate from data source to view controller, is it possible to use closures or delegation pattern. A typical implementation of a simple table view data source could be like:</p>
<pre class="highlight swift"><code><span class="kd">class</span> <span class="kt">ItemDataSource</span><span class="p">:</span> <span class="kt">NSObject</span><span class="p">,</span> <span class="kt">UITableViewDataSource</span> <span class="p">{</span>

    <span class="kd">private</span> <span class="k">var</span> <span class="nv">items</span> <span class="o">=</span> <span class="p">[</span><span class="kt">Any</span><span class="p">]()</span>

    <span class="nf">init</span><span class="p">(</span><span class="nv">tableView</span><span class="p">:</span> <span class="kt">WKTableView</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// register cell here so when you need this data source you don't have to repeat this line of code</span>
        <span class="n">tableView</span><span class="o">.</span><span class="nf">register</span><span class="p">(</span><span class="nv">cell</span><span class="p">:</span> <span class="kt">ItemTableViewCell</span><span class="o">.</span><span class="k">self</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">tableView</span><span class="p">(</span><span class="n">_</span> <span class="nv">tableView</span><span class="p">:</span> <span class="kt">UITableView</span><span class="p">,</span> <span class="n">numberOfRowsInSection</span> <span class="nv">section</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Int</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">items</span><span class="o">.</span><span class="n">count</span>
    <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">tableView</span><span class="p">(</span><span class="n">_</span> <span class="nv">tableView</span><span class="p">:</span> <span class="kt">UITableView</span><span class="p">,</span> <span class="n">cellForRowAt</span> <span class="nv">indexPath</span><span class="p">:</span> <span class="kt">IndexPath</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">UITableViewCell</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">cell</span> <span class="o">=</span> <span class="n">tableView</span><span class="o">.</span><span class="nf">dequeueReusableCell</span><span class="p">(</span><span class="nv">ofType</span><span class="p">:</span> <span class="kt">ItemTableViewCell</span><span class="o">.</span><span class="k">self</span><span class="p">,</span> <span class="nv">for</span><span class="p">:</span> <span class="n">indexPath</span><span class="p">)</span>
        <span class="k">let</span> <span class="nv">presenter</span> <span class="o">=</span> <span class="kt">ItemPresenter</span><span class="p">(</span><span class="nv">with</span><span class="p">:</span> <span class="n">items</span><span class="p">[</span><span class="n">indexPath</span><span class="o">.</span><span class="n">row</span><span class="p">])</span>
        <span class="n">cell</span><span class="o">.</span><span class="nf">configure</span><span class="p">(</span><span class="nv">with</span><span class="p">:</span> <span class="n">presenter</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">cell</span>
    <span class="p">}</span>

<span class="p">}</span>

</code></pre>

<p>Then in your view controller use the data source as instance variable.</p>

<p><strong>Tips</strong>: <code>WinkKit</code> provides few ready data source classes that have common methods, like inserting/deleting/reloading items or handle infinite scroll. Check <code><a href="Classes/WKTableViewDataSource.html">WKTableViewDataSource</a></code>, <code><a href="Classes/WKCollectionViewDataSource.html">WKCollectionViewDataSource</a></code> and <code><a href="Classes/WKTableViewInfiniteDataSourceDelegate.html">WKTableViewInfiniteDataSourceDelegate</a></code>. </p>
<h2 id='utils-and-more-a-name-utils_and_more-a' class='heading'>Utils and more <a name="Utils_And_More"></a></h2>

<p>There are other classes and extensions that can be used to achieve some behaviour:</p>

<ul>
<li>Classes:

<ul>
<li><code>Logger</code>: contains methods to log info and to avoid print debug info in release mode;</li>
<li><code>OrderedSet</code>: it&rsquo;s like a <code>Set</code> but elements are ordered;</li>
<li><code>Queue</code>: a simple queue class</li>
</ul></li>
<li>Extensions:

<ul>
<li><code>UIAlertController</code>: contains method to show quickly an alert</li>
<li><code>Date</code>: contains an <code>init</code> to create a date from a string and a format and some methods to get day, hour of month</li>
<li><code>Collection</code>: constains a subscript to access values even if the index is wrong (it returns an optional)</li>
<li><code>CALayer</code>: contains method to add border to a layer</li>
<li><code>UIColor</code>: allow color creation with a hex string</li>
<li><code>UIWindow</code>: contains method to get the current top most view controller.</li>
</ul></li>
</ul>
<h2 id='license' class='heading'>License</h2>

<p>This project is licensed under the MIT License - see the <a href="LICENSE">LICENSE</a> file for details</p>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2018 <a class="link" href="https://github.com/WINKgroup/WinkKit" target="_blank" rel="external">Rico Crescenzio</a>. All rights reserved. (Last updated: 2018-11-13)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ‚ô™‚ô´ v0.9.4</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
